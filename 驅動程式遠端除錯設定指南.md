# AIRTOS é©…å‹•ç¨‹å¼é ç«¯é™¤éŒ¯è¨­å®šæŒ‡å—

## ğŸ—ï¸ æ¶æ§‹æ¦‚è¿°

é ç«¯é™¤éŒ¯éœ€è¦å…©å°æ©Ÿå™¨ï¼š
- **ğŸ–¥ï¸ é–‹ç™¼æ©Ÿå™¨ï¼ˆHostï¼‰**: æ‚¨çš„ä¸»è¦é–‹ç™¼é›»è…¦ï¼Œé‹è¡Œ Visual Studioã€WinDbg å’Œæ§‹å»ºå·¥å…·
- **ğŸ¯ æ¸¬è©¦æ©Ÿå™¨ï¼ˆTargetï¼‰**: é ç«¯ Windows 10 æ©Ÿå™¨ï¼Œç”¨æ–¼å®‰è£å’Œæ¸¬è©¦é©…å‹•ç¨‹å¼

---

## ğŸš€ å¿«é€Ÿé–‹å§‹ï¼ˆä¸‰æ­¥é©Ÿï¼‰

### ç¬¬ä¸€æ­¥ï¼šè¨­å®šæ¸¬è©¦æ©Ÿå™¨ï¼ˆé ç«¯é›»è…¦ï¼‰

åœ¨**æ¸¬è©¦æ©Ÿå™¨**ä¸Šä»¥ç®¡ç†å“¡èº«ä»½åŸ·è¡Œï¼ˆåƒ…éœ€è¨­å®šä¸€æ¬¡ï¼‰ï¼š

```cmd
REM å•Ÿç”¨æ¸¬è©¦ç°½åæ¨¡å¼
bcdedit /set testsigning on

REM è¨­å®šç¶²è·¯é™¤éŒ¯ï¼ˆå°‡ 192.168.1.50 æ›¿æ›ç‚ºæ‚¨çš„é–‹ç™¼æ©Ÿå™¨ IPï¼‰
bcdedit /dbgsettings net hostip:192.168.1.50 port:50000 key:1.2.3.4

REM é‡æ–°é–‹æ©Ÿä½¿è¨­å®šç”Ÿæ•ˆ
shutdown /r /t 0
```

> âš ï¸ **é‡è¦**ï¼šå°‡ `192.168.1.50` æ›¿æ›ç‚ºæ‚¨çš„é–‹ç™¼æ©Ÿå™¨ IP ä½å€

### ç¬¬äºŒæ­¥ï¼šåœ¨é–‹ç™¼æ©Ÿå™¨ä¸Šä½¿ç”¨è‡ªå‹•åŒ–å·¥å…·

åœ¨**é–‹ç™¼æ©Ÿå™¨**ä¸Šä½¿ç”¨é€™äº›è…³æœ¬ï¼š

#### ğŸ›ï¸ äº’å‹•å¼å·¥å…·ï¼ˆæ¨è–¦æ–°æ‰‹ï¼‰
```powershell
# å•Ÿå‹•äº’å‹•å¼é–‹ç™¼å·¥å…·
.\quick_start_simple.ps1
```

#### ğŸ”„ ä¸€éµå®Œæ•´æµç¨‹
```powershell
# å®Œæ•´é™¤éŒ¯æµç¨‹ï¼šæ§‹å»º â†’ éƒ¨ç½² â†’ é™¤éŒ¯ï¼ˆä½¿ç”¨ WDKRemoteUserï¼‰
.\debug_session.ps1 -TargetIP "192.168.1.100" -Username "WDKRemoteUser" -Password "YourPassword" -Action Full

# æˆ–ä½¿ç”¨å…¶ä»–å¸³è™Ÿ
.\debug_session.ps1 -TargetIP "192.168.1.100" -Username "testuser" -Password "password" -Action Full
```

#### ğŸ“¦ å€‹åˆ¥æ“ä½œ
```powershell
# åƒ…éƒ¨ç½²é©…å‹•ç¨‹å¼ï¼ˆæ¨è–¦ä½¿ç”¨ WDKRemoteUserï¼‰
.\deploy_driver.ps1 -TargetIP "192.168.1.100" -Username "WDKRemoteUser" -Password "YourPassword"

# åƒ…å•Ÿå‹•é™¤éŒ¯å™¨
.\debug_session.ps1 -TargetIP "192.168.1.100" -Username "WDKRemoteUser" -Password "YourPassword" -Action Debug

# å¸è¼‰å’Œæ¸…ç†
.\uninstall_driver.ps1 -TargetIP "192.168.1.100" -Username "WDKRemoteUser" -Password "YourPassword" -CleanAll
```

### ç¬¬ä¸‰æ­¥ï¼šé–‹å§‹é™¤éŒ¯

WinDbg æœƒè‡ªå‹•å•Ÿå‹•ä¸¦é€£æ¥åˆ°æ¸¬è©¦æ©Ÿå™¨ï¼Œæ‚¨å°±å¯ä»¥é–‹å§‹é™¤éŒ¯äº†ï¼

---

## ğŸ“ é–‹ç™¼æ©Ÿå™¨è…³æœ¬èªªæ˜

æ‰€æœ‰é€™äº›è…³æœ¬éƒ½åœ¨**é–‹ç™¼æ©Ÿå™¨**ä¸ŠåŸ·è¡Œï¼š

| è…³æœ¬æª”æ¡ˆ | ç”¨é€” | åŸ·è¡Œä½ç½® |
|---------|------|----------|
| `quick_start_simple.ps1` | ğŸ›ï¸ äº’å‹•å¼é–‹ç™¼å·¥å…· | é–‹ç™¼æ©Ÿå™¨ |
| `debug_session.ps1` | ğŸ”„ å®Œæ•´é™¤éŒ¯æµç¨‹ç®¡ç† | é–‹ç™¼æ©Ÿå™¨ |
| `deploy_driver.ps1` | ğŸ“¦ éƒ¨ç½²é©…å‹•ç¨‹å¼åˆ°æ¸¬è©¦æ©Ÿå™¨ | é–‹ç™¼æ©Ÿå™¨ |
| `uninstall_driver.ps1` | ğŸ—‘ï¸ å¾æ¸¬è©¦æ©Ÿå™¨å¸è¼‰é©…å‹•ç¨‹å¼ | é–‹ç™¼æ©Ÿå™¨ |
| `build.ps1` | ğŸ”¨ æ§‹å»ºé©…å‹•ç¨‹å¼ | é–‹ç™¼æ©Ÿå™¨ |

## ğŸ¯ æ¸¬è©¦æ©Ÿå™¨è¨­å®šèªªæ˜

æ¸¬è©¦æ©Ÿå™¨åªéœ€è¦åŸ·è¡Œ**ä¸€æ¬¡æ€§è¨­å®š**ï¼Œä¹‹å¾Œæ‰€æœ‰æ“ä½œéƒ½å¾é–‹ç™¼æ©Ÿå™¨æ§åˆ¶ï¼š

### å¿…è¦è¨­å®š
```cmd
REM é€™äº›å‘½ä»¤åœ¨æ¸¬è©¦æ©Ÿå™¨ä¸ŠåŸ·è¡Œ
bcdedit /set testsigning on
bcdedit /dbgsettings net hostip:<é–‹ç™¼æ©Ÿå™¨IP> port:50000 key:1.2.3.4
```

### é¸ç”¨è¨­å®šï¼ˆæå‡æ¬Šé™ï¼‰
```cmd
REM å•Ÿç”¨ PowerShell é ç«¯è™•ç†ï¼ˆå…è¨±é–‹ç™¼æ©Ÿå™¨é ç«¯æ§åˆ¶ï¼‰
powershell -Command "Enable-PSRemoting -Force"

REM è¨­å®šé˜²ç«ç‰†è¦å‰‡
netsh advfirewall firewall add rule name="Kernel Debug" dir=in action=allow protocol=UDP port=50000
```

### ğŸ”‘ ä½¿ç”¨ WDKRemoteUser å¸³è™Ÿï¼ˆå¦‚æœå­˜åœ¨ï¼‰

å¦‚æœæ‚¨çš„æ¸¬è©¦æ©Ÿå™¨ä¸Šæœ‰ WDKRemoteUser å¸³è™Ÿï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š

```cmd
REM æª¢æŸ¥ WDKRemoteUser å¸³è™Ÿç‹€æ…‹
net user WDKRemoteUser

REM è¨­å®šæˆ–é‡è¨­å¯†ç¢¼
net user WDKRemoteUser NewPassword123!

REM ç¢ºä¿å¸³è™Ÿå·²å•Ÿç”¨
net user WDKRemoteUser /active:yes

REM å°‡å¸³è™ŸåŠ å…¥ç®¡ç†å“¡ç¾¤çµ„ï¼ˆå¦‚æœé‚„æ²’æœ‰ï¼‰
net localgroup administrators WDKRemoteUser /add
```

### ğŸŒ å•Ÿç”¨ PowerShell é ç«¯è™•ç†

**åœ¨æ¸¬è©¦æ©Ÿå™¨ä¸Š**ä»¥ç®¡ç†å“¡èº«ä»½åŸ·è¡Œï¼š
```cmd
REM å•Ÿç”¨ PowerShell é ç«¯è™•ç†
powershell -Command "Enable-PSRemoting -Force"

REM è¨­å®š WinRM æœå‹™
winrm quickconfig -force

REM è¨­å®šé˜²ç«ç‰†å…è¨± WinRM
netsh advfirewall firewall add rule name="WinRM-HTTP" dir=in localport=5985 protocol=TCP action=allow

REM è¨­å®š WinRM ä¿¡ä»»æ‰€æœ‰ä¸»æ©Ÿï¼ˆåƒ…æ¸¬è©¦ç’°å¢ƒï¼‰
REM æ–¹æ³•1ï¼šä½¿ç”¨ PowerShellï¼ˆæ¨è–¦ï¼‰
powershell -Command "Set-Item WSMan:\localhost\Client\TrustedHosts -Value '*' -Force"

REM æ–¹æ³•2ï¼šä½¿ç”¨ winrm å‘½ä»¤ï¼ˆæ›¿ä»£èªæ³•ï¼‰
winrm set winrm/config/client @{TrustedHosts="*"}
```

**åœ¨é–‹ç™¼æ©Ÿå™¨ä¸Š**ä»¥ç®¡ç†å“¡èº«ä»½åŸ·è¡Œï¼š
```powershell
# å°‡æ¸¬è©¦æ©Ÿå™¨åŠ å…¥ä¿¡ä»»æ¸…å–®
Set-Item WSMan:\localhost\Client\TrustedHosts -Value "192.168.1.73" -Force

# æˆ–ä¿¡ä»»æ•´å€‹ç¶²æ®µï¼ˆæ›´ç°¡å–®ä½†è¼ƒä¸å®‰å…¨ï¼‰
Set-Item WSMan:\localhost\Client\TrustedHosts -Value "192.168.1.*" -Force
```

ç„¶å¾Œåœ¨é–‹ç™¼æ©Ÿå™¨ä¸Šä½¿ç”¨ï¼š
```powershell
# ä½¿ç”¨ WDKRemoteUser å¸³è™Ÿ
.\debug_session.ps1 -TargetIP "192.168.1.73" -Username "WDKRemoteUser" -Password "NewPassword123!" -Action Full
```

---

## ğŸ“„ é…ç½®æª”æ¡ˆç¯„æœ¬

è¤‡è£½ `remote_config_template.json` ä¸¦ä¿®æ”¹ç‚ºæ‚¨çš„è¨­å®šï¼š

```json
{
  "TargetIP": "192.168.1.100",        // æ¸¬è©¦æ©Ÿå™¨ IP
  "Username": "testuser",             // æ¸¬è©¦æ©Ÿå™¨ä½¿ç”¨è€…åç¨±
  "Password": "",                     // æ¸¬è©¦æ©Ÿå™¨å¯†ç¢¼ï¼ˆå»ºè­°ç•™ç©ºï¼ŒåŸ·è¡Œæ™‚è¼¸å…¥ï¼‰
  "Configuration": "Debug",           // æ§‹å»ºé…ç½®
  "RemotePath": "C:\\DriverTest",     // æ¸¬è©¦æ©Ÿå™¨ä¸Šçš„é©…å‹•ç¨‹å¼è·¯å¾‘
  "DebugPort": "50000",              // é™¤éŒ¯é€£æ¥åŸ 
  "DebugKey": "1.2.3.4"              // é™¤éŒ¯é‡‘é‘°
}
```

ç„¶å¾Œä½¿ç”¨é…ç½®æª”æ¡ˆï¼š
```powershell
.\quick_start_simple.ps1 -ConfigFile "my_config.json"
```

---

## ğŸ”§ è©³ç´°å·¥ä½œæµç¨‹

### é–‹ç™¼æ©Ÿå™¨çš„å®Œæ•´æ“ä½œæµç¨‹

1. **æ§‹å»ºé©…å‹•ç¨‹å¼**
   ```powershell
   .\build.ps1 -Configuration Debug
   ```

2. **éƒ¨ç½²åˆ°æ¸¬è©¦æ©Ÿå™¨**
   ```powershell
   .\deploy_driver.ps1 -TargetIP "192.168.1.100" -Username "testuser" -Password "password"
   ```

3. **å•Ÿå‹•é™¤éŒ¯å™¨**
   ```powershell
   .\debug_session.ps1 -TargetIP "192.168.1.100" -Username "testuser" -Password "password" -Action Debug
   ```

4. **æ¸¬è©¦å®Œæˆå¾Œæ¸…ç†**
   ```powershell
   .\uninstall_driver.ps1 -TargetIP "192.168.1.100" -Username "testuser" -Password "password"
   ```

### æˆ–è€…ä½¿ç”¨ä¸€éµæµç¨‹
```powershell
# ä¸€å€‹å‘½ä»¤å®Œæˆæ‰€æœ‰æ­¥é©Ÿ
.\debug_session.ps1 -TargetIP "192.168.1.100" -Username "testuser" -Password "password" -Action Full
```

---

## ğŸ› ï¸ ç’°å¢ƒéœ€æ±‚

### é–‹ç™¼æ©Ÿå™¨éœ€æ±‚
- âœ… Windows 10/11
- âœ… Visual Studio 2022 Community + WDK
- âœ… WinDbg (Windows SDK æˆ– WinDbg Preview)
- âœ… PowerShell 5.0+
- âœ… ç¶²è·¯é€£æ¥åˆ°æ¸¬è©¦æ©Ÿå™¨

### æ¸¬è©¦æ©Ÿå™¨éœ€æ±‚
- âœ… Windows 10 64-bit
- âœ… ç®¡ç†å“¡æ¬Šé™
- âœ… ç¶²è·¯é€£æ¥åˆ°é–‹ç™¼æ©Ÿå™¨
- âœ… PowerShell é ç«¯è™•ç†å·²å•Ÿç”¨ï¼ˆå»ºè­°ï¼‰
- âš ï¸ **é‡è¦**: æ‡‰è©²æ˜¯è™›æ“¬æ©Ÿæˆ–å°ˆç”¨æ¸¬è©¦æ©Ÿå™¨

---

## ğŸ› WinDbg é™¤éŒ¯å‘½ä»¤åƒè€ƒ

é€£æ¥æˆåŠŸå¾Œï¼Œåœ¨ WinDbg ä¸­å¸¸ç”¨çš„å‘½ä»¤ï¼š

```
// è¼‰å…¥é©…å‹•ç¨‹å¼ç¬¦è™Ÿ
.sympath+ C:\path\to\your\symbols

// è¨­å®šä¸­æ–·é»
bp HybridRTOSDriver!DriverEntry

// æª¢è¦–è¼‰å…¥çš„æ¨¡çµ„
lm m HybridRTOSDriver

// æª¢è¦–å‘¼å«å †ç–Š
k

// ç¹¼çºŒåŸ·è¡Œ
g

// å–®æ­¥åŸ·è¡Œ
t

// æª¢è¦–è¨˜æ†¶é«”
dd address

// é¡¯ç¤ºçµæ§‹
dt nt!_DRIVER_OBJECT
```

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é …

### å®‰å…¨æ€§
- ğŸ”’ æ¸¬è©¦æ©Ÿå™¨æ‡‰è©²åœ¨éš”é›¢çš„ç¶²è·¯ç’°å¢ƒä¸­
- ğŸ”’ ä¸è¦åœ¨ç”Ÿç”¢ç’°å¢ƒæ¸¬è©¦é©…å‹•ç¨‹å¼
- ğŸ”’ å»ºè­°ä½¿ç”¨è™›æ“¬æ©Ÿä½œç‚ºæ¸¬è©¦æ©Ÿå™¨

### ç¶²è·¯è¨­å®š
- ğŸŒ ç¢ºä¿å…©å°æ©Ÿå™¨å¯ä»¥äº’ç›¸ ping é€š
- ğŸŒ é˜²ç«ç‰†éœ€è¦é–‹æ”¾ç«¯å£ 50000 (UDP)
- ğŸŒ å¦‚æœä½¿ç”¨ Wi-Fiï¼Œç¢ºä¿åœ¨åŒä¸€ç¶²æ®µ

### æ¬Šé™è¦æ±‚
- ğŸ‘‘ å…©å°æ©Ÿå™¨éƒ½éœ€è¦ç®¡ç†å“¡æ¬Šé™
- ğŸ‘‘ æ¸¬è©¦æ©Ÿå™¨éœ€è¦å…è¨± PowerShell é ç«¯è™•ç†

---

## ğŸ”§ æ•…éšœæ’é™¤

### ç„¡æ³•é€£æ¥åˆ°æ¸¬è©¦æ©Ÿå™¨ï¼ˆPowerShell é ç«¯è™•ç†å•é¡Œï¼‰

å¦‚æœé‡åˆ° "WinRM ç”¨æˆ¶ç«¯ç„¡æ³•è™•ç†è©²è¦æ±‚" éŒ¯èª¤ï¼š

#### åœ¨æ¸¬è©¦æ©Ÿå™¨ä¸ŠåŸ·è¡Œï¼š
```cmd
REM ä»¥ç®¡ç†å“¡èº«ä»½åŸ·è¡Œ
powershell -Command "Enable-PSRemoting -Force"
winrm quickconfig -force

REM è¨­å®š TrustedHostsï¼ˆå…©ç¨®æ–¹æ³•é¸ä¸€ï¼‰
REM æ–¹æ³•1ï¼šä½¿ç”¨ PowerShellï¼ˆæ¨è–¦ï¼‰
powershell -Command "Set-Item WSMan:\localhost\Client\TrustedHosts -Value '*' -Force"

REM æ–¹æ³•2ï¼šä½¿ç”¨ winrm å‘½ä»¤
winrm set winrm/config/client @{TrustedHosts="*"}

REM è¨­å®šé˜²ç«ç‰†
netsh advfirewall firewall add rule name="WinRM-HTTP" dir=in localport=5985 protocol=TCP action=allow
```

#### åœ¨é–‹ç™¼æ©Ÿå™¨ä¸ŠåŸ·è¡Œï¼š
```powershell
# ä»¥ç®¡ç†å“¡èº«ä»½åŸ·è¡Œ PowerShell
Set-Item WSMan:\localhost\Client\TrustedHosts -Value "192.168.1.73" -Force

# æ¸¬è©¦é€£æ¥
Test-WSMan -ComputerName 192.168.1.73
```

### ç¶²è·¯é€£é€šæ€§æ¸¬è©¦
```powershell
# æ¸¬è©¦åŸºæœ¬ç¶²è·¯é€£é€šæ€§
ping 192.168.1.73

# æ¸¬è©¦ PowerShell é ç«¯è™•ç†
Test-WSMan -ComputerName 192.168.1.73

# æ¸¬è©¦é ç«¯ PowerShell æœƒè©±
$Cred = Get-Credential
Test-PSSession -ComputerName 192.168.1.73 -Credential $Cred
```

### WinDbg ç„¡æ³•é€£æ¥
1. æª¢æŸ¥æ¸¬è©¦æ©Ÿå™¨æ˜¯å¦å·²é‡æ–°é–‹æ©Ÿ
2. ç¢ºèªé™¤éŒ¯è¨­å®šåƒæ•¸æ­£ç¢º
3. æª¢æŸ¥é˜²ç«ç‰†è¨­å®š

### é©…å‹•ç¨‹å¼è¼‰å…¥å¤±æ•—
1. ç¢ºèªæ¸¬è©¦ç°½åæ¨¡å¼å·²å•Ÿç”¨ï¼š`bcdedit /enum | findstr testsigning`
2. æª¢æŸ¥é©…å‹•ç¨‹å¼æª”æ¡ˆå®Œæ•´æ€§
3. æŸ¥çœ‹ Windows äº‹ä»¶æ—¥èªŒ

---

## ğŸ“š å¿«é€Ÿåƒè€ƒå¡

### æ¸¬è©¦æ©Ÿå™¨ä¸€æ¬¡æ€§è¨­å®š
```cmd
bcdedit /set testsigning on
bcdedit /dbgsettings net hostip:<é–‹ç™¼æ©Ÿå™¨IP> port:50000 key:1.2.3.4
shutdown /r /t 0
```

### é–‹ç™¼æ©Ÿå™¨å¸¸ç”¨å‘½ä»¤
```powershell
# äº’å‹•å¼å·¥å…·
.\quick_start_simple.ps1

# å®Œæ•´æµç¨‹
.\debug_session.ps1 -TargetIP <IP> -Username <user> -Password <pass> -Action Full

# åƒ…éƒ¨ç½²
.\deploy_driver.ps1 -TargetIP <IP> -Username <user> -Password <pass>

# æ¸…ç†
.\uninstall_driver.ps1 -TargetIP <IP> -Username <user> -Password <pass> -CleanAll
```

---

é€™æ¨£è¨­å®šå¾Œï¼Œæ‚¨å°±å¯ä»¥å®‰å…¨ã€é«˜æ•ˆåœ°é€²è¡Œ AIRTOS é©…å‹•ç¨‹å¼çš„é ç«¯é™¤éŒ¯äº†ï¼ğŸš€
